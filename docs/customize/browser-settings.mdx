---
title: "Browser Settings"
description: "Configure browser behavior and context settings"
icon: "globe"
---

Browsernode allows you to customize the browser's behavior through two main configuration classes: `BrowserConfig` and `BrowserContextConfig`. These settings control everything from headless mode to proxy settings and page load behavior.

<Note>
  We are currently working on improving how browser contexts are managed. The
  system will soon transition to a "1 agent, 1 browser, 1 context" model for
  better stability and developer experience.
</Note>

# Browser Configuration

The `BrowserConfig` class controls the core browser behavior and connection settings.

```js
import { BrowserConfig } from "browsernode";

// Basic configuration
const config = new BrowserConfig({
    headless: false,
    disableSecurity: true
});

const browser = new Browser(config);

const agent = new Agent(task, llm, {
    browser: browser,
    // ...
});
agent.run();
```

## Core Settings

- **headless** (default: `False`)
  Runs the browser without a visible UI. Note that some websites may detect headless mode.

- **disableSecurity** (default: `True`)
  Disables browser security features. While this can fix certain functionality issues (like cross-site iFrames), it should be used cautiously, especially when visiting untrusted websites.

### Additional Settings

- **extraBrowserArgs** (default: `[]`)
  Additional arguments are passed to the browser at launch. See the [full list of available arguments](../../src/browser/browser.ts).

- **proxy** (default: `null`)
  Standard Playwright proxy settings for using external proxy services.

- **newContextConfig** (default: `BrowserContextConfig()`)
  Default settings for new browser contexts. See Context Configuration below.

<Note>
  For web scraping tasks on sites that restrict automated access, we recommend
  using external browser or proxy providers for better reliability.
</Note>

## Alternative Initialization

These settings allow you to connect to external browser providers or use a local Chrome instance.

### External Browser Provider (wss)

Connect to cloud-based browser services for enhanced reliability and proxy capabilities.

```js
const config = new BrowserConfig({
    wssUrl: "wss://your-browser-provider.com/ws"
});
```

- **wssUrl** (default: `null`)
  WebSocket URL for connecting to external browser providers (e.g., [anchorbrowser.io](https://anchorbrowser.io), steel.dev, browserbase.com, browserless.io, [TestingBot](https://testingbot.com/support/ai/integrations/browsernode)).

<Note>
  This overrides local browser settings and uses the provider's configuration.
  Refer to their documentation for settings.
</Note>

### External Browser Provider (cdp)

Connect to cloud or local Chrome instances using Chrome DevTools Protocol (CDP) for use with tools like `headless-shell` or `browserless`.

```js
const config = new BrowserConfig({
    cdpUrl: "http://localhost:9222"
});
```

- **cdpUrl** (default: `null`)
  URL for connecting to a Chrome instance via CDP. Commonly used for debugging or connecting to locally running Chrome instances.

### Local Chrome Instance (binary)

Connect to your existing Chrome installation to access saved states and cookies.

```js
const config = new BrowserConfig({
    browserInstancePath: "/Applications/Google Chrome.app/Contents/MacOS/Google Chrome"
});
```

- **browserInstancePath** (default: `null`)
  Path to connect to an existing Browser installation. Particularly useful for workflows requiring existing login states or browser preferences.

<Note>This will overwrite other browser settings.</Note>

# Context Configuration

The `BrowserContextConfig` class controls settings for individual browser contexts.

```js
import { BrowserContextConfig } from "browsernode";

const config = new BrowserContextConfig({
    cookiesFile: "path/to/cookies.json",
    waitForNetworkIdlePageLoadTime: 3.0,
    browserWindowSize: { width: 1280, height: 1100 },
    locale: 'en-US',
    userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36',
    highlightElements: true,
    viewportExpansion: 500,
    allowedDomains: ['google.com', 'wikipedia.org'],
)

const browser = new Browser(config);
const context = await browser.newContext(config);


async function run_search() {
	const agent = new Agent(task, llm, {
		browserContext: context,
	});
	await agent.run();
}

run_search();
```

## Configuration Options

### Page Load Settings

- **minimumWaitPageLoadTime** (default: `0.5`)
  Minimum time to wait before capturing page state for LLM input.

- **waitForNetworkIdlePageLoadTime** (default: `1.0`)
  Time to wait for network activity to cease. Increase to 3-5s for slower websites. This tracks essential content loading, not dynamic elements like videos.

- **maximumWaitPageLoadTime** (default: `5.0`)
  Maximum time to wait for page load before proceeding.

### Display Settings

- **browserWindowSize** (default: `{'width': 1280, 'height': 1100}`)
  Browser window dimensions. The default size is optimized for general use cases and interaction with common UI elements like cookie banners.

- **locale** (default: `null`)
  Specify user locale, for example en-GB, de-DE, etc. Locale will affect the navigator. Language value, Accept-Language request header value as well as number and date formatting rules. If not provided, defaults to the system default locale.

- **highlightElements** (default: `True`)
  Highlight interactive elements on the screen with colorful bounding boxes.

- **viewportExpansion** (default: `500`)
  Viewport expansion in pixels. With this you can controll how much of the page is included in the context of the LLM. If set to -1, all elements from the entire page will be included (this leads to high token usage). If set to 0, only the elements which are visible in the viewport will be included.
  Default is 500 pixels, that means that we inlcude a little bit more than the visible viewport inside the context.

### Restrict URLs

- **allowedDomains** (default: `null`)
  List of allowed domains that the agent can access. If None, all domains are allowed.
  Example: ['google.com', 'wikipedia.org'] - Here the agent will only be able to access google and wikipedia.

### Debug and Recording

- **saveRecordingPath** (default: `null`)
  Directory path for saving video recordings.

- **tracePath** (default: `null`)
  Directory path for saving trace files. Files are automatically named as `{trace_path}/{context_id}.zip`.
